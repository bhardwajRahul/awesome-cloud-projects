{
  "app": "python app.py",
  "watch": {
    "include": [
      "**"
    ],
    "exclude": [
      "README.md",
      "cdk*.json",
      "requirements*.txt",
      "source.bat",
      "**/__pycache__",
      "**/*.pyc",
      ".venv/**",
      ".env",
      ".git/**",
      ".pytest_cache/**",
      "**/.DS_Store",
      "**/node_modules/**",
      "cdk.out/**"
    ]
  },
  "context": {
    "@aws-cdk/aws-lambda:recognizeLayerVersion": true,
    "@aws-cdk/core:checkSecretUsage": true,
    "@aws-cdk/core:target-partitions": [
      "aws",
      "aws-cn"
    ],
    "@aws-cdk-containers/ecs-service-extensions:enableDefaultLogDriver": true,
    "@aws-cdk/aws-ec2:uniqueImdsv2TemplateName": true,
    "@aws-cdk/aws-ecs:arnFormatIncludesClusterName": true,
    "@aws-cdk/aws-iam:minimizePolicies": true,
    "@aws-cdk/core:validateSnapshotRemovalPolicy": true,
    "@aws-cdk/aws-codepipeline:crossAccountKeyAliasStackSafeResourceName": true,
    "@aws-cdk/aws-s3:createDefaultLoggingPolicy": true,
    "@aws-cdk/aws-sns-subscriptions:restrictSqsDescryption": true,
    "@aws-cdk/aws-apigateway:disableCloudWatchRole": true,
    "@aws-cdk/core:enablePartitionLiterals": true,
    "@aws-cdk/aws-events:eventsTargetQueueSameAccount": true,
    "@aws-cdk/aws-iam:standardizedServicePrincipals": true,
    "@aws-cdk/aws-ecs:disableExplicitDeploymentControllerForCircuitBreaker": true,
    "@aws-cdk/aws-iam:importedRoleStackSafeDefaultPolicyName": true,
    "@aws-cdk/aws-s3:serverAccessLogsUseBucketPolicy": true,
    "@aws-cdk/aws-route53-patters:useCertificate": true,
    "@aws-cdk/customresources:installLatestAwsSdkDefault": false,
    "@aws-cdk/aws-rds:databaseProxyUniqueResourceName": true,
    "@aws-cdk/aws-codedeploy:removeAlarmsFromDeploymentGroup": true,
    "@aws-cdk/aws-apigateway:authorizerChangeDeploymentLogicalId": true,
    "@aws-cdk/aws-ec2:launchTemplateDefaultUserData": true,
    "@aws-cdk/aws-secretsmanager:useAttachedSecretResourcePolicyForSecretTargetAttachments": true,
    "@aws-cdk/aws-redshift:columnId": true,
    "@aws-cdk/aws-stepfunctions-tasks:enableLogging": true,
    "@aws-cdk/aws-ec2:restrictDefaultSecurityGroup": true,
    "@aws-cdk/aws-apigateway:requestValidatorUniqueId": true,
    "@aws-cdk/aws-kms:aliasNameRef": true,
    "@aws-cdk/aws-autoscaling:generateLaunchTemplateInsteadOfLaunchConfig": true,
    "@aws-cdk/core:includePrefixInUniqueNameGeneration": true,
    "@aws-cdk/aws-efs:denyAnonymousAccess": true,
    "@aws-cdk/aws-opensearchservice:enableOpensearchMultiAzWithStandby": true,
    "@aws-cdk/aws-lambda-nodejs:useLatestRuntimeVersion": true,
    "@aws-cdk/aws-efs:mountTargetOrderInsensitiveLogicalId": true,
    "@aws-cdk/aws-rds:auroraClusterChangeScopeOfInstanceParameterGroupWithEachParameters": true,
    "@aws-cdk/aws-appsync:useArnForSourceApiAssociationIdentifier": true,
    "@aws-cdk/aws-rds:preventRenderingDeprecatedCredentials": true,
    "@aws-cdk/aws-codepipeline-actions:useNewDefaultBranchForSourceActions": true,
    "@aws-cdk/aws-cloudwatch-actions:changeLambdaPermissionLogicalIdForLambdaAction": true,
    "@aws-cdk/aws-codepipeline:crossAccountKeysDefaultValueToFalse": true,
    "@aws-cdk/aws-codepipeline:defaultPipelineTypeToV2": true,
    "@aws-cdk/aws-kms:reduceCrossAccountRegionPolicyScope": true,
    "@aws-cdk/aws-eks:nodegroupNameAttribute": true,
    "@aws-cdk/aws-ec2:ebsDefaultGp3Volume": true,
    "@aws-cdk/aws-ecs:removeDefaultDeploymentAlarm": true,

    "platform_name": "enterprise-streaming",
    "enable_drm": true,
    "enable_low_latency": true,
    "archive_content": true,
    
    "streaming_platform": {
      "default_region": "us-east-1",
      "supported_regions": [
        "us-east-1",
        "us-west-2", 
        "eu-west-1",
        "ap-southeast-1",
        "ap-northeast-1"
      ],
      "video_settings": {
        "max_bitrate": "MAX_50_MBPS",
        "input_codec": "AVC",
        "input_resolution": "HD",
        "segment_duration": 4,
        "gop_size": 90,
        "encoding_profiles": {
          "4k_uhd": {
            "width": 3840,
            "height": 2160,
            "bitrate": 15000000,
            "profile": "HIGH",
            "level": "H264_LEVEL_5_1"
          },
          "1080p_hd": {
            "width": 1920,
            "height": 1080,
            "bitrate": 6000000,
            "profile": "HIGH", 
            "level": "H264_LEVEL_4_1"
          },
          "720p_hd": {
            "width": 1280,
            "height": 720,
            "bitrate": 3000000,
            "profile": "HIGH",
            "level": "H264_LEVEL_3_1"
          },
          "480p_sd": {
            "width": 854,
            "height": 480,
            "bitrate": 1500000,
            "profile": "MAIN",
            "level": "H264_LEVEL_3_0"
          },
          "240p_mobile": {
            "width": 426,
            "height": 240,
            "bitrate": 500000,
            "profile": "BASELINE",
            "level": "H264_LEVEL_2_0"
          }
        }
      },
      "audio_settings": {
        "stereo": {
          "bitrate": 128000,
          "coding_mode": "CODING_MODE_2_0",
          "sample_rate": 48000,
          "spec": "MPEG4"
        },
        "surround": {
          "bitrate": 256000,
          "coding_mode": "CODING_MODE_5_1",
          "sample_rate": 48000,
          "spec": "MPEG4"
        }
      },
      "mediapackage_settings": {
        "hls": {
          "segment_duration_seconds": 4,
          "playlist_type": "EVENT",
          "playlist_window_seconds": 300,
          "program_date_time_interval_seconds": 60,
          "ad_markers": "SCTE35_ENHANCED",
          "include_iframe_only_stream": true,
          "use_audio_rendition_group": true,
          "startover_window_seconds": 3600,
          "time_delay_seconds": 10
        },
        "dash": {
          "segment_duration_seconds": 4,
          "min_buffer_time_seconds": 20,
          "min_update_period_seconds": 10,
          "suggested_presentation_delay_seconds": 30,
          "profile": "NONE",
          "period_triggers": ["ADS"],
          "startover_window_seconds": 3600,
          "time_delay_seconds": 10
        },
        "cmaf_low_latency": {
          "segment_duration_seconds": 2,
          "segment_prefix": "segment",
          "playlist_type": "EVENT",
          "playlist_window_seconds": 60,
          "program_date_time_interval_seconds": 60,
          "ad_markers": "SCTE35_ENHANCED",
          "startover_window_seconds": 1800,
          "time_delay_seconds": 2
        }
      },
      "cloudfront_settings": {
        "price_class": "PriceClass_All",
        "http_version": "http2",
        "enable_ipv6": true,
        "minimum_protocol_version": "TLSv1.2_2021",
        "cache_behaviors": {
          "manifests": {
            "path_pattern": "*.m3u8",
            "ttl": {
              "default": 5,
              "max": 60,
              "min": 0
            },
            "compress": true
          },
          "dash_manifests": {
            "path_pattern": "*.mpd", 
            "ttl": {
              "default": 5,
              "max": 60,
              "min": 0
            },
            "compress": true
          },
          "video_segments": {
            "path_pattern": "*.ts",
            "ttl": {
              "default": 86400,
              "max": 86400,
              "min": 0
            },
            "compress": false
          },
          "low_latency_manifests": {
            "path_pattern": "*/ll.m3u8",
            "ttl": {
              "default": 2,
              "max": 10,
              "min": 0
            },
            "compress": true
          }
        }
      },
      "monitoring_settings": {
        "enable_detailed_monitoring": true,
        "alarm_thresholds": {
          "input_loss_threshold": 0.5,
          "egress_error_threshold": 100,
          "cloudfront_error_rate_threshold": 5
        },
        "alarm_evaluation_periods": 2,
        "metrics_collection_interval": 60
      },
      "security_settings": {
        "enable_drm_protection": true,
        "allowed_origins": ["*"],
        "input_security_groups": {
          "public": {
            "whitelist_cidrs": ["0.0.0.0/0"]
          },
          "internal": {
            "whitelist_cidrs": ["10.0.0.0/8", "172.16.0.0/12", "192.168.0.0/16"]
          }
        }
      },
      "storage_settings": {
        "enable_archiving": true,
        "archive_prefix": "archives/",
        "lifecycle_rules": {
          "transition_to_ia": 30,
          "transition_to_glacier": 90,
          "transition_to_deep_archive": 365
        },
        "versioning_enabled": true,
        "encryption": "S3_MANAGED"
      }
    },

    "deployment_environments": {
      "development": {
        "enable_drm": false,
        "enable_low_latency": false,
        "archive_content": false,
        "instance_sizes": "small",
        "monitoring_level": "basic"
      },
      "staging": {
        "enable_drm": true,
        "enable_low_latency": true,
        "archive_content": true,
        "instance_sizes": "medium",
        "monitoring_level": "enhanced"
      },
      "production": {
        "enable_drm": true,
        "enable_low_latency": true,
        "archive_content": true,
        "instance_sizes": "large",
        "monitoring_level": "comprehensive"
      }
    },

    "cost_optimization": {
      "enable_lifecycle_policies": true,
      "archive_older_content": true,
      "use_spot_instances": false,
      "auto_scaling_enabled": true,
      "scheduled_scaling": {
        "scale_down_after_hours": true,
        "weekend_scaling": true
      }
    },

    "compliance_and_governance": {
      "enable_resource_tagging": true,
      "enable_cost_allocation_tags": true,
      "backup_retention_days": 30,
      "enable_audit_logging": true,
      "data_residency_requirements": "US",
      "compliance_frameworks": ["SOC2", "GDPR"]
    },

    "feature_flags": {
      "enable_experimental_features": false,
      "enable_beta_codecs": false,
      "enable_advanced_analytics": true,
      "enable_ml_insights": false,
      "enable_preview_features": false
    },

    "integration_settings": {
      "enable_api_gateway": false,
      "enable_cognito_auth": false,
      "enable_custom_domains": false,
      "enable_cdn_security": true,
      "enable_waf_protection": false
    }
  },
  
  "version": "2.110.0",
  "bootstrapQualifier": "video-streaming-platform",
  "versionReporting": true,
  "pathMetadata": true,
  "assetMetadata": true,
  "staging": true,
  "output": "cdk.out",
  "requireApproval": "never",
  "lookups": true,
  "bundlingStacks": [],
  "notices": true,
  "debug": false,
  "profile": null,
  "toolkitStack": {
    "name": "CDKToolkitVideoStreaming",
    "tags": {
      "Project": "VideoStreamingPlatform",
      "Environment": "Infrastructure",
      "Owner": "MediaTeam"
    }
  }
}