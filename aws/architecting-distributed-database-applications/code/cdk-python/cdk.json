{
  "app": "python app.py",
  "watch": {
    "include": [
      "**"
    ],
    "exclude": [
      "README.md",
      "cdk*.json",
      "requirements*.txt",
      "source.bat",
      "**/__pycache__",
      "**/*.pyc",
      ".pytest_cache/**",
      ".coverage",
      "htmlcov/**",
      "dist/**",
      "build/**",
      "*.egg-info/**",
      ".mypy_cache/**",
      ".venv/**",
      "venv/**",
      "env/**",
      ".env"
    ]
  },
  "context": {
    "@aws-cdk/core:enableStackNameDuplicates": true,
    "aws-cdk:enableDiffNoFail": true,
    "@aws-cdk/core:stackRelativeExports": true,
    "@aws-cdk/aws-lambda:recognizeLayerVersion": true,
    "@aws-cdk/aws-lambda:recognizeVersionProps": true,
    "@aws-cdk/aws-cloudfront:defaultSecurityPolicyTLSv1.2_2021": true,
    "@aws-cdk/aws-apigateway:usagePlanKeyOrderInsensitiveId": true,
    "@aws-cdk/core:target-partitions": [
      "aws",
      "aws-cn"
    ],
    "@aws-cdk/aws-iam:minimizePolicies": true,
    "@aws-cdk/aws-iam:importedRoleStackSafeDefaultPolicyName": true,
    "@aws-cdk/aws-lambda:defaultDeadLetterQueue": true,
    "@aws-cdk/aws-s3:createDefaultLoggingPolicy": true,
    "@aws-cdk/aws-sns-subscriptions:restrictSqsDescryption": true,
    "@aws-cdk/aws-apigateway:disableCloudWatchRole": true,
    "@aws-cdk/core:enablePartitionLiterals": true,
    "@aws-cdk/core:enableStackTrace": true,
    "@aws-cdk/aws-lambda-nodejs:useLatestRuntimeVersion": true,
    "@aws-cdk/aws-ecs:reduceRunTaskPermissions": true,
    "@aws-cdk/aws-lambda:configureDefaultLogRetention": true,
    "@aws-cdk/core:newStyleStackSynthesis": true,
    "@aws-cdk/aws-rds:lowercaseDbIdentifier": true,
    "@aws-cdk/aws-efs:denyAnonymousAccess": true,
    "@aws-cdk/aws-opensearchservice:enableOpensearchMultiAzWithStandby": true,
    "@aws-cdk/aws-events:eventsTargetQueueSameAccount": true,
    "@aws-cdk/aws-iam:standardizedServicePrincipals": true,
    "@aws-cdk/aws-ecs:disableExplicitDeploymentControllerForCircuitBreaker": true,
    "@aws-cdk/aws-iam:importedRoleStackSafeDefaultPolicyName": true,
    "@aws-cdk/aws-s3:serverAccessLogsUseBucketPolicy": true,
    "@aws-cdk/aws-route53-patters:useCertificate": true,
    "@aws-cdk/customresources:installLatestAwsSdkDefault": false,
    "@aws-cdk/aws-rds:databaseProxyUniqueResourceName": true,
    "@aws-cdk/aws-codedeploy:removeAlarmsFromDeploymentGroup": true,
    "@aws-cdk/aws-apigateway:authorizerChangeDeploymentLogicalId": true,
    "@aws-cdk/aws-ec2:launchTemplateDefaultUserData": true,
    "@aws-cdk/aws-secretsmanager:useAttachedSecretResourcePolicyForSecretTargetAttachments": true,
    "@aws-cdk/aws-redshift:columnId": true,
    "@aws-cdk/aws-stepfunctions-tasks:enableLogging": true,
    "@aws-cdk/aws-ec2:restrictDefaultSecurityGroup": true,
    "@aws-cdk/aws-apigateway:requestValidatorUniqueId": true,
    "@aws-cdk/aws-kms:aliasNameRef": true,
    "@aws-cdk/aws-autoscaling:generateLaunchTemplateInsteadOfLaunchConfig": true,
    "@aws-cdk/core:includePrefixInUniqueNameGeneration": true,
    "@aws-cdk/aws-opensearch:enableOpensearchMultiAzWithStandby": true,

    "primary_region": "us-east-1",
    "secondary_region": "us-west-2", 
    "witness_region": "eu-west-1",
    "environment": "production",
    "unique_suffix": "recipe",

    "aurora_dsql_configuration": {
      "engine_version": "postgres",
      "multi_region_enabled": true,
      "witness_region_enabled": true,
      "tags": {
        "Environment": "Production",
        "Application": "DistributedApp",
        "Purpose": "MultiRegionDatabase",
        "CreatedBy": "CDK"
      }
    },

    "lambda_configuration": {
      "runtime": "python3.9",
      "timeout": 30,
      "memory_size": 256,
      "reserved_concurrent_executions": 100,
      "environment_variables": {
        "LOG_LEVEL": "INFO",
        "POWERTOOLS_SERVICE_NAME": "aurora-dsql-processor"
      }
    },

    "eventbridge_configuration": {
      "custom_bus_enabled": true,
      "cross_region_replication": true,
      "event_replay_enabled": true,
      "archive_retention_days": 30
    },

    "security_configuration": {
      "encryption_at_rest": true,
      "encryption_in_transit": true,
      "iam_authentication": true,
      "vpc_enabled": false,
      "least_privilege_iam": true
    },

    "monitoring_configuration": {
      "cloudwatch_logs_retention_days": 30,
      "detailed_monitoring": true,
      "x_ray_tracing": true,
      "custom_metrics": true
    },

    "cost_optimization": {
      "lambda_provisioned_concurrency": false,
      "aurora_dsql_auto_pause": true,
      "cloudwatch_log_retention": 30,
      "resource_tagging": true
    },

    "deployment_configuration": {
      "bootstrap_required": true,
      "cross_account_deployment": false,
      "rollback_configuration": true,
      "stack_termination_protection": true
    }
  },
  
  "toolkitStackName": "CDKToolkit",
  "toolkitBucketName": "cdktoolkit-stagingbucket-{RANDOM}",
  
  "versionReporting": true,
  "pathMetadata": true,
  "assetMetadata": true,
  "notices": true,
  "bundlingStacks": [],
  "lookups": true,
  "rollback": true,
  
  "build": "python -m pip install -r requirements.txt",
  "test": "python -m pytest tests/ -v --cov=app --cov-report=html",
  "lint": "python -m flake8 app.py && python -m black --check app.py",
  "format": "python -m black app.py && python -m isort app.py",
  "type-check": "python -m mypy app.py",
  "security-scan": "python -m bandit -r app.py",
  
  "scripts": {
    "bootstrap": "cdk bootstrap",
    "diff": "cdk diff",
    "deploy": "cdk deploy --require-approval=never",
    "destroy": "cdk destroy --force",
    "synth": "cdk synth",
    "list": "cdk list",
    "doctor": "cdk doctor",
    "metadata": "cdk metadata",
    "acknowledge": "cdk acknowledge",
    "notices": "cdk notices"
  },
  
  "profile": "default",
  
  "output": "cdk.out",
  
  "requireApproval": "broadening",
  "ci": false,
  "staging": true,
  "assetPublishingZipLevel": 9,
  "assetPublishingParallel": true
}