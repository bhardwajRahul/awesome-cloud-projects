# ====================================
# AWS BACKUP SOLUTION CONFIGURATION
# ====================================
# Copy this file to terraform.tfvars and customize for your environment

# ====================================
# BASIC CONFIGURATION
# ====================================

# Primary AWS region where backup resources will be created
primary_region = "us-west-2"

# Disaster recovery region for cross-region backup replication
dr_region = "us-east-1"

# Environment name (production, staging, development, test)
environment = "production"

# ====================================
# NOTIFICATION CONFIGURATION
# ====================================

# Email address for backup notifications (leave empty to disable email notifications)
notification_email = "backup-admin@yourcompany.com"

# ====================================
# BACKUP SCHEDULE CONFIGURATION
# ====================================

# Daily backup schedule (2 AM UTC daily)
daily_backup_schedule = "cron(0 2 ? * * *)"

# Weekly backup schedule (3 AM UTC every Sunday)
weekly_backup_schedule = "cron(0 3 ? * SUN *)"

# Monthly backup schedule (4 AM UTC on the 1st of each month)
monthly_backup_schedule = "cron(0 4 1 * ? *)"

# ====================================
# BACKUP RETENTION CONFIGURATION
# ====================================

# Number of days to retain daily backups
daily_backup_retention_days = 30

# Number of days to retain weekly backups
weekly_backup_retention_days = 90

# Number of days to retain monthly backups (1 year)
monthly_backup_retention_days = 365

# ====================================
# BACKUP WINDOW CONFIGURATION
# ====================================

# Start window in minutes for backup jobs (1 hour)
backup_start_window_minutes = 60

# Completion window for daily backups (2 hours)
backup_completion_window_minutes = 120

# Completion window for weekly backups (4 hours)
weekly_backup_completion_window_minutes = 240

# Completion window for monthly backups (6 hours)
monthly_backup_completion_window_minutes = 360

# ====================================
# FEATURE TOGGLES
# ====================================

# Enable continuous backup for supported resources (RDS, DynamoDB)
enable_continuous_backup = true

# Enable AWS Backup reporting functionality
enable_backup_reporting = true

# Enable AWS Config compliance rules for backup monitoring
# Note: Requires AWS Config to be enabled in your account
enable_config_compliance = false

# Enable automated restore testing functionality
# Note: This may incur additional costs for test resources
enable_restore_testing = false

# Enable backup vault lock for immutable backups (compliance mode)
# Warning: This cannot be undone once enabled
enable_backup_vault_lock = false

# ====================================
# SECURITY CONFIGURATION
# ====================================

# Number of days to wait before deleting KMS keys (7-30 days)
kms_deletion_window_days = 10

# Backup vault lock configuration (only applies if enable_backup_vault_lock = true)
backup_vault_lock_changeable_days = 3
backup_vault_lock_min_retention_days = 1
backup_vault_lock_max_retention_days = 36500

# ====================================
# MONITORING CONFIGURATION
# ====================================

# Threshold in bytes for backup storage usage alarm (100 GB)
backup_storage_threshold_bytes = 107374182400

# List of backup vault events to send notifications for
backup_vault_events = [
  "BACKUP_JOB_STARTED",
  "BACKUP_JOB_COMPLETED",
  "BACKUP_JOB_FAILED",
  "RESTORE_JOB_STARTED",
  "RESTORE_JOB_COMPLETED",
  "RESTORE_JOB_FAILED",
  "COPY_JOB_STARTED",
  "COPY_JOB_SUCCESSFUL",
  "COPY_JOB_FAILED"
]

# ====================================
# RESOURCE NAMING CONFIGURATION
# ====================================

# Prefix for backup vault names
backup_vault_prefix = "enterprise-backup-vault"
dr_backup_vault_prefix = "dr-backup-vault"

# Prefix for backup plan name
backup_plan_prefix = "enterprise-backup-plan"

# Name for AWS Backup service role
backup_service_role_name = "AWSBackupDefaultServiceRole"

# Prefix for SNS topic name
sns_topic_prefix = "backup-notifications"

# Prefix for S3 bucket that stores backup reports
s3_reports_bucket_prefix = "aws-backup-reports"

# ====================================
# COMPLIANCE CONFIGURATION
# ====================================
# Only applies if enable_config_compliance = true

# Required backup frequency for Config compliance rule
config_required_frequency_value = "1"
config_required_frequency_unit = "days"

# Required backup retention for Config compliance rule
config_required_retention_days = "35"

# ====================================
# RESTORE TESTING CONFIGURATION
# ====================================
# Only applies if enable_restore_testing = true

# Cron expression for automated restore testing (4 AM UTC every Monday)
restore_testing_schedule = "cron(0 4 ? * MON *)"

# Number of days to look back for recovery points in restore testing
restore_testing_selection_window_days = 7

# ====================================
# RESOURCE EXCLUSIONS
# ====================================

# List of specific resource ARNs to exclude from backup
# Example: ["arn:aws:ec2:us-west-2:123456789012:instance/i-1234567890abcdef0"]
backup_exclusion_resources = []

# ====================================
# DEFAULT TAGS
# ====================================

# Tags applied to all backup resources
default_tags = {
  Project           = "Enterprise-Backup-Solution"
  Owner            = "Platform-Team"
  Environment      = "production"
  CostCenter       = "IT-Infrastructure"
  BackupSolution   = "AWS-Backup"
  ManagedBy        = "Terraform"
  CreatedDate      = "2025-01-15"
  MaintenanceWindow = "Sunday-2AM-6AM-UTC"
}

# ====================================
# EXAMPLE CONFIGURATIONS BY USE CASE
# ====================================

# DEVELOPMENT ENVIRONMENT EXAMPLE:
# environment = "development"
# daily_backup_retention_days = 7
# weekly_backup_retention_days = 30
# monthly_backup_retention_days = 90
# enable_backup_reporting = false
# enable_config_compliance = false
# enable_restore_testing = false

# COMPLIANCE-HEAVY ENVIRONMENT EXAMPLE:
# environment = "production"
# daily_backup_retention_days = 30
# weekly_backup_retention_days = 90
# monthly_backup_retention_days = 2555  # 7 years
# enable_backup_vault_lock = true
# backup_vault_lock_min_retention_days = 30
# backup_vault_lock_max_retention_days = 2555
# enable_config_compliance = true
# enable_restore_testing = true

# COST-OPTIMIZED ENVIRONMENT EXAMPLE:
# environment = "staging"
# daily_backup_retention_days = 14
# weekly_backup_retention_days = 60
# monthly_backup_retention_days = 180
# enable_continuous_backup = false
# enable_backup_reporting = true
# enable_restore_testing = false