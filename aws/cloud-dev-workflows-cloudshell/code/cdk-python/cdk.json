{
  "app": "python3 app.py",
  "watch": {
    "include": [
      "**"
    ],
    "exclude": [
      "README.md",
      "cdk*.json",
      "requirements*.txt",
      "source.bat",
      "**/__pycache__",
      "**/*.pyc",
      ".venv/**",
      ".env/**",
      "node_modules/**",
      "**/.git/**",
      "**/.pytest_cache/**",
      "**/.coverage",
      "**/htmlcov/**",
      "**/.mypy_cache/**",
      "**/*.log"
    ]
  },
  "context": {
    "@aws-cdk/aws-lambda:recognizeLayerVersion": true,
    "@aws-cdk/core:checkSecretUsage": true,
    "@aws-cdk/core:target-partitions": [
      "aws",
      "aws-cn"
    ],
    "@aws-cdk-containers/ecs-service-extensions:enableDefaultLogDriver": true,
    "@aws-cdk/aws-ec2:uniqueImdsv2TemplateName": true,
    "@aws-cdk/aws-ecs:arnFormatIncludesClusterName": true,
    "@aws-cdk/aws-iam:minimizePolicies": true,
    "@aws-cdk/core:validateSnapshotRemovalPolicy": true,
    "@aws-cdk/aws-codepipeline:crossAccountKeyAliasStackSafeResourceName": true,
    "@aws-cdk/aws-s3:createDefaultLoggingPolicy": true,
    "@aws-cdk/aws-sns-subscriptions:restrictSqsDescryption": true,
    "@aws-cdk/aws-apigateway:disableCloudWatchRole": true,
    "@aws-cdk/core:enablePartitionLiterals": true,
    "@aws-cdk/aws-events:eventsTargetQueueSameAccount": true,
    "@aws-cdk/aws-iam:standardizedServicePrincipals": true,
    "@aws-cdk/aws-ecs:disableExplicitDeploymentControllerForCircuitBreaker": true,
    "@aws-cdk/aws-iam:importedRoleStackSafeDefaultPolicyName": true,
    "@aws-cdk/aws-s3:serverAccessLogsUseBucketPolicy": true,
    "@aws-cdk/aws-route53-patters:useCertificate": true,
    "@aws-cdk/customresources:installLatestAwsSdkDefault": false,
    "@aws-cdk/aws-rds:databaseProxyUniqueResourceName": true,
    "@aws-cdk/aws-codedeploy:removeAlarmsFromDeploymentGroup": true,
    "@aws-cdk/aws-apigateway:authorizerChangeDeploymentLogicalId": true,
    "@aws-cdk/aws-ec2:launchTemplateDefaultUserData": true,
    "@aws-cdk/aws-secretsmanager:useAttachedSecretResourcePolicyForSecretTargetAttachments": true,
    "@aws-cdk/aws-redshift:columnId": true,
    "@aws-cdk/aws-stepfunctions-tasks:enableLoggingConfiguration": true,
    "@aws-cdk/aws-ec2:restrictDefaultSecurityGroup": true,
    "@aws-cdk/aws-apigateway:requestValidatorUniqueId": true,
    "@aws-cdk/aws-kms:aliasNameRef": true,
    "@aws-cdk/aws-autoscaling:generateLaunchTemplateInsteadOfLaunchConfig": true,
    "@aws-cdk/core:includePrefixInUniqueNameGeneration": true,
    "@aws-cdk/aws-efs:denyAnonymousAccess": true,
    "@aws-cdk/aws-opensearchservice:enableLogging": true,
    "@aws-cdk/aws-sns:fifoTopicPartitioning": true,
    "@aws-cdk/aws-lambda:recognizeVersionProps": true,
    "@aws-cdk/aws-cloudfront:defaultSecurityPolicyTLSv1.2_2021": true,
    "@aws-cdk/core:stackRelativeExports": true,
    "@aws-cdk/aws-rds:lowercaseDbIdentifier": true,
    "@aws-cdk/aws-efs:mountTargetOrderInsensitiveLogicalId": true,
    "@aws-cdk/aws-rds:generateSecretManagerSecretName": true,
    "@aws-cdk/aws-ecs-patterns:removeDefaultDesiredCount": true
  },
  "build": {
    "commands": [
      "echo 'Building CDK application...'",
      "python3 -m pip install --upgrade pip",
      "python3 -m pip install -r requirements.txt",
      "echo 'Validating Python syntax...'",
      "python3 -m py_compile app.py",
      "echo 'Build completed successfully'"
    ]
  },
  "test": {
    "commands": [
      "echo 'Running tests...'",
      "python3 -m pytest tests/ -v --tb=short",
      "echo 'Running security checks...'",
      "python3 -m bandit -r . -x tests/",
      "echo 'Running code quality checks...'",
      "python3 -m flake8 app.py --max-line-length=88",
      "echo 'All tests and checks completed'"
    ]
  },
  "deploy": {
    "requireApproval": "never",
    "parameters": {
      "repositoryName": "${REPOSITORY_NAME:-dev-workflow-demo}",
      "enableNotifications": "${ENABLE_NOTIFICATIONS:-true}"
    }
  },
  "tags": {
    "Project": "CloudBasedDevelopmentWorkflows",
    "Purpose": "DemoInfrastructure",
    "Environment": "Development",
    "ManagedBy": "CDK",
    "CostCenter": "Engineering"
  },
  "metadata": {
    "description": "CDK application for cloud-based development workflows using AWS CloudShell and CodeCommit",
    "version": "1.0.0",
    "author": "AWS Solutions Architecture",
    "repository": "https://github.com/aws-samples/cloud-recipes",
    "documentation": "https://docs.aws.amazon.com/cloudshell/",
    "keywords": [
      "aws",
      "cdk",
      "cloudshell",
      "codecommit",
      "development",
      "workflow",
      "git",
      "devops"
    ],
    "license": "MIT"
  },
  "feature_flags": {
    "@aws-cdk/core:enableStackNameDuplicates": true,
    "@aws-cdk/core:enableDiffNoFail": true,
    "@aws-cdk/core:stackRelativeExports": true
  },
  "notices": {
    "codecommit-deprecation": {
      "message": "AWS CodeCommit is no longer available to new customers as of July 2024. Existing customers can continue using the service. Consider alternatives like GitHub, GitLab, or AWS CodeStar Connections for new implementations.",
      "level": "warning"
    }
  },
  "toolkitStackName": "CDKToolkit-CloudBasedWorkflows",
  "profile": "default",
  "outputs": "cdk-outputs.json",
  "assetMetadata": true,
  "pathMetadata": true,
  "versionReporting": true,
  "staging": true,
  "bundlingStacks": []
}