# ==============================================================================
# Service Discovery with Traffic Director and Cloud DNS - Example Variables
# ==============================================================================
# Copy this file to terraform.tfvars and customize for your environment

# Required Variables
# ==================
project_id = "your-gcp-project-id"    # Replace with your GCP project ID
region     = "us-central1"             # Primary deployment region

# Service Configuration
# ====================
service_name    = "microservice"       # Base name for the service
dns_zone_name   = "discovery-zone"     # DNS zone name
base_domain     = "example.com"        # Your domain name
environment     = "dev"                # Environment: dev, staging, prod, test

# Network Configuration
# ====================
subnet_cidr = "10.0.0.0/24"           # CIDR for the service mesh subnet
service_vip = "10.0.1.100"            # Virtual IP for Traffic Director

# Compute Configuration
# ====================
machine_type       = "e2-medium"       # Instance size (e2-micro for dev, e2-medium+ for prod)
instances_per_zone = 2                 # Number of instances per zone (1-10)
disk_size_gb      = 20                 # Boot disk size in GB
assign_external_ip = false             # Whether to assign external IPs (false for security)

# DNS Configuration
# ================
create_public_dns = false              # Create public DNS zone for external access
dns_ttl          = 300                 # DNS record TTL in seconds
health_dns_ttl   = 60                  # Health check DNS TTL in seconds

# Health Check Configuration
# =========================
health_check_timeout           = 5     # Health check timeout (seconds)
health_check_interval          = 10    # Health check interval (seconds)
health_check_healthy_threshold = 2     # Consecutive successful checks before healthy
health_check_unhealthy_threshold = 3   # Consecutive failed checks before unhealthy

# Traffic Director Configuration
# =============================
locality_lb_policy        = "ROUND_ROBIN"  # Load balancing policy
connection_draining_timeout = 60           # Connection draining timeout (seconds)
max_rate_per_endpoint     = 100            # Max requests per second per endpoint

# Circuit Breaker Configuration
# =============================
max_requests_per_connection = 1000     # Max requests per connection
max_connections            = 1000      # Max connections
max_pending_requests       = 100       # Max pending requests
max_retries               = 3          # Max retries

# Outlier Detection Configuration
# ==============================
consecutive_errors         = 3         # Errors before ejection
outlier_detection_interval = 30        # Detection interval (seconds)
base_ejection_time        = 30         # Base ejection time (seconds)
max_ejection_percent      = 50         # Max percentage to eject (0-100)
min_health_percent        = 50         # Minimum healthy percentage (0-100)

# Security Configuration
# =====================
enable_ssh         = true              # Enable SSH access (disable in production)
ssh_source_ranges  = ["0.0.0.0/0"]    # SSH source IP ranges (restrict in production)

# Testing Configuration
# ====================
create_test_client = true              # Create test client instance for validation

# Example configurations for different environments:

# Development Environment
# =======================
# project_id = "dev-project-123"
# environment = "dev"
# machine_type = "e2-micro"
# instances_per_zone = 1
# create_test_client = true
# enable_ssh = true
# assign_external_ip = true

# Staging Environment
# ==================
# project_id = "staging-project-456"
# environment = "staging"
# machine_type = "e2-medium"
# instances_per_zone = 2
# create_test_client = true
# enable_ssh = true
# assign_external_ip = false
# ssh_source_ranges = ["10.0.0.0/8", "192.168.0.0/16"]

# Production Environment
# =====================
# project_id = "prod-project-789"
# environment = "prod"
# machine_type = "e2-standard-4"
# instances_per_zone = 3
# create_test_client = false
# enable_ssh = false
# assign_external_ip = false
# ssh_source_ranges = ["10.0.0.0/8"]
# health_check_interval = 5
# max_rate_per_endpoint = 500
# consecutive_errors = 2
# max_ejection_percent = 30

# High-Performance Configuration
# =============================
# machine_type = "c2-standard-8"
# instances_per_zone = 4
# disk_size_gb = 50
# max_rate_per_endpoint = 1000
# max_requests_per_connection = 5000
# max_connections = 5000
# health_check_interval = 5
# health_check_timeout = 3

# Cost-Optimized Configuration
# ===========================
# machine_type = "e2-micro"
# instances_per_zone = 1
# disk_size_gb = 10
# create_test_client = false
# assign_external_ip = false

# Security-Hardened Configuration
# ==============================
# enable_ssh = false
# assign_external_ip = false
# ssh_source_ranges = ["10.0.0.0/8"]
# create_public_dns = false