# Example Terraform Variables for Supply Chain Transparency Infrastructure
# Copy this file to terraform.tfvars and customize the values for your deployment

# ============================================================================
# REQUIRED VARIABLES
# ============================================================================

# Google Cloud Project Configuration
project_id = "your-project-id-here"          # Replace with your GCP project ID
region     = "us-central1"                   # GCP region for deployment
zone       = "us-central1-a"                 # GCP zone for zonal resources

# ============================================================================
# ENVIRONMENT CONFIGURATION
# ============================================================================

environment     = "dev"                      # Environment name (dev, staging, prod)
resource_prefix = "supply-chain"             # Prefix for all resource names

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# Cloud SQL PostgreSQL Settings
db_instance_tier       = "db-custom-2-8192"    # Machine type for Cloud SQL instance
db_version            = "POSTGRES_15"          # PostgreSQL version
db_backup_enabled     = true                   # Enable automated backups
db_high_availability  = false                  # Enable high availability (increases cost)
db_deletion_protection = true                  # Protect against accidental deletion

# ============================================================================
# BLOCKCHAIN CONFIGURATION
# ============================================================================

# Blockchain Node Engine Settings
blockchain_network          = "MAINNET"        # MAINNET, GOERLI, or SEPOLIA
blockchain_node_type        = "FULL"           # FULL or ARCHIVE
blockchain_execution_client = "GETH"           # GETH or ERIGON
blockchain_consensus_client = "LIGHTHOUSE"     # LIGHTHOUSE

# ============================================================================
# CLOUD FUNCTIONS CONFIGURATION
# ============================================================================

# Function Runtime and Resource Settings
function_runtime      = "nodejs20"             # Runtime for Cloud Functions
function_memory       = "512Mi"                # Memory allocation
function_timeout      = 60                     # Timeout in seconds
function_max_instances = 100                   # Maximum concurrent instances

# ============================================================================
# PUB/SUB CONFIGURATION
# ============================================================================

# Messaging Settings
pubsub_message_retention_duration = "604800s"  # 7 days in seconds
pubsub_ack_deadline_seconds       = 300        # Acknowledgment deadline

# ============================================================================
# SECURITY & ENCRYPTION
# ============================================================================

# Cloud KMS Settings
kms_key_rotation_period             = "7776000s"  # 90 days in seconds
kms_key_destroy_scheduled_duration = "86400s"     # 24 hours in seconds

# SSL and Security Settings
enable_ssl_enforcement = true                   # Enforce SSL for database connections

# Network Access Control
allowed_source_ranges = [                      # CIDR blocks allowed to access resources
  "10.0.0.0/8",
  "172.16.0.0/12", 
  "192.168.0.0/16"
]

# ============================================================================
# NETWORKING CONFIGURATION
# ============================================================================

# VPC Network Settings
enable_private_google_access = true            # Enable Private Google Access
vpc_cidr_block              = "10.0.0.0/16"   # VPC CIDR block
private_subnet_cidr         = "10.0.1.0/24"   # Private subnet CIDR

# ============================================================================
# MONITORING & LOGGING
# ============================================================================

# Observability Settings
enable_cloud_monitoring = true                 # Enable Cloud Monitoring
enable_cloud_logging    = true                 # Enable Cloud Logging
log_retention_days      = 30                   # Log retention period

# ============================================================================
# RESOURCE LABELING
# ============================================================================

# Common Labels (applied to all resources)
labels = {
  managed-by    = "terraform"
  project       = "supply-chain-transparency"
  team          = "platform-engineering"
  cost-center   = "engineering"
  environment   = "development"
  compliance    = "required"
}

# ============================================================================
# EXAMPLES FOR DIFFERENT ENVIRONMENTS
# ============================================================================

## Development Environment Example
# environment              = "dev"
# db_instance_tier        = "db-f1-micro"
# db_high_availability    = false
# blockchain_network      = "GOERLI"
# function_max_instances  = 10
# log_retention_days      = 7

## Staging Environment Example  
# environment              = "staging"
# db_instance_tier        = "db-custom-1-4096"
# db_high_availability    = false
# blockchain_network      = "GOERLI"
# function_max_instances  = 50
# log_retention_days      = 14

## Production Environment Example
# environment              = "prod"
# db_instance_tier        = "db-custom-4-16384"
# db_high_availability    = true
# blockchain_network      = "MAINNET"
# function_max_instances  = 1000
# log_retention_days      = 90
# enable_ssl_enforcement  = true

# ============================================================================
# COST OPTIMIZATION TIPS
# ============================================================================

# For cost optimization:
# - Use smaller instance tiers for development: db_instance_tier = "db-f1-micro"
# - Disable high availability for non-production: db_high_availability = false
# - Use testnet for development: blockchain_network = "GOERLI"
# - Reduce function instances for development: function_max_instances = 10
# - Shorter log retention for development: log_retention_days = 7

# ============================================================================
# SECURITY RECOMMENDATIONS
# ============================================================================

# For enhanced security:
# - Always enable SSL enforcement: enable_ssl_enforcement = true
# - Use restrictive CIDR blocks for allowed_source_ranges
# - Enable deletion protection for production: db_deletion_protection = true
# - Use longer key rotation periods for production: kms_key_rotation_period = "7776000s"
# - Enable high availability for production: db_high_availability = true