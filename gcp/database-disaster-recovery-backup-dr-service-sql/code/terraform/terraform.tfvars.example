# Example Terraform variables for Database Disaster Recovery with Backup and DR Service and Cloud SQL
# Copy this file to terraform.tfvars and update the values for your environment

# REQUIRED VARIABLES
# ===================

# Your Google Cloud Project ID
project_id = "my-project-123"

# Your Google Cloud Project Number (found in project settings or via: gcloud projects describe PROJECT_ID --format="value(projectNumber)")
project_number = "123456789012"

# OPTIONAL VARIABLES
# ==================

# Regions for deployment
primary_region   = "us-central1"  # Primary region for Cloud SQL and backup vault
secondary_region = "us-east1"     # Secondary region for DR replica and backup vault

# Environment and naming
environment = "prod"  # Environment identifier (used in resource naming and labels)

# Database configuration
database_version = "POSTGRES_15"        # Supported: POSTGRES_13, POSTGRES_14, POSTGRES_15, POSTGRES_16, MYSQL_8_0
db_tier         = "db-custom-2-8192"    # Machine type: db-f1-micro, db-g1-small, db-custom-{vCPUs}-{memory_MB}
storage_size_gb = 100                   # Initial storage size in GB (auto-resize enabled)
max_connections = 200                   # Maximum database connections

# Backup and retention configuration
backup_retention_days = 30       # Number of days to retain backups (7-365)
backup_start_time    = "03:00"   # Daily backup start time in HH:MM format

# Security settings
enable_deletion_protection = true   # Protect instances from accidental deletion
enable_binary_logging     = true   # Enable point-in-time recovery
enable_private_ip         = false  # Use private IP (requires VPC configuration)

# Network configuration (if using private IP)
network_name = "default"  # VPC network name for private IP deployment

# Authorized networks for public IP access (if enable_private_ip = false)
authorized_networks = [
  # {
  #   name  = "office-network"
  #   value = "203.0.113.0/24"
  # },
  # {
  #   name  = "vpn-network" 
  #   value = "198.51.100.0/24"
  # }
]

# Monitoring and automation
monitoring_schedule = "0 */6 * * *"  # Cron schedule for health checks (every 6 hours)

# Cloud Function configuration
function_timeout_seconds = 540    # Function timeout (1-540 seconds)
function_memory         = "512M"  # Function memory: 128M, 256M, 512M, 1024M, 2048M, 4096M, 8192M

# Alert notification channels (optional - add your notification channel IDs)
alert_notification_channels = [
  # "projects/my-project-123/notificationChannels/1234567890123456789",
  # "projects/my-project-123/notificationChannels/9876543210987654321"
]

# Resource labels
labels = {
  environment = "production"
  team        = "platform"
  cost-center = "engineering"
  managed-by  = "terraform"
  purpose     = "disaster-recovery"
}

# ADVANCED CONFIGURATION EXAMPLES
# ================================

# Example: High-performance production configuration
# db_tier         = "db-custom-8-32768"  # 8 vCPUs, 32GB RAM
# storage_size_gb = 500
# max_connections = 1000
# backup_retention_days = 90

# Example: Development/testing configuration
# db_tier         = "db-f1-micro"         # Smallest instance
# storage_size_gb = 20
# max_connections = 50
# backup_retention_days = 7
# enable_deletion_protection = false

# Example: Enhanced security configuration
# enable_private_ip = true
# network_name     = "secure-vpc"
# authorized_networks = []  # No public access when using private IP

# Example: Cost-optimized monitoring
# monitoring_schedule = "0 */12 * * *"    # Every 12 hours instead of 6
# function_memory    = "256M"             # Smaller memory allocation

# Example: Multi-region backup strategy
# You can deploy this configuration in multiple regions by using different
# terraform workspaces or separate configurations with different region values

# COST ESTIMATION REFERENCE
# =========================
# Based on us-central1 and us-east1 regions (prices may vary):
#
# db-f1-micro (development):     ~$25/month per instance
# db-custom-2-8192 (production): ~$200/month per instance  
# db-custom-4-16384 (high-perf): ~$400/month per instance
# db-custom-8-32768 (enterprise):~$800/month per instance
#
# Additional costs:
# - Storage: ~$0.17/GB/month (SSD)
# - Backup storage: ~$0.08/GB/month
# - Network egress: Variable based on usage
# - Cloud Functions: ~$0.40 per million invocations
# - Cloud Scheduler: ~$0.10 per job per month
#
# Total estimated monthly cost for production setup: $467-965/month

# SECURITY CONSIDERATIONS
# =======================
# 1. Use private IP for production databases when possible
# 2. Configure VPC firewall rules to restrict access
# 3. Regularly rotate database passwords
# 4. Enable Cloud SQL audit logging for compliance
# 5. Use least-privilege IAM roles
# 6. Consider using Secret Manager for sensitive configuration

# COMPLIANCE NOTES
# ================
# This configuration includes:
# - Encrypted storage at rest (automatic)
# - Automated backups with configurable retention
# - Cross-region disaster recovery
# - Audit trail through Cloud Logging
# - Immutable backup vaults for data protection
# - Automated health monitoring and alerting