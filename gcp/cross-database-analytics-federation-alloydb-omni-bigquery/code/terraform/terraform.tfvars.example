# Example Terraform variables for Cross-Database Analytics Federation
# Copy this file to terraform.tfvars and update the values for your environment

# Required Variables
project_id  = "your-gcp-project-id"
db_password = "your-secure-database-password"

# Optional Variables with Recommended Values
region      = "us-central1"
zone        = "us-central1-a"
environment = "dev"

# Cloud SQL Configuration
alloydb_tier             = "db-custom-2-8192"  # 2 vCPUs, 8GB RAM
alloydb_disk_size        = 20                  # GB
alloydb_disk_type        = "PD_SSD"
enable_high_availability = true
backup_retention_days    = 7

# BigQuery Configuration
bigquery_location = ""  # Leave empty to use same as region, or specify like "US" for multi-region

# Storage Configuration
storage_class              = "STANDARD"
enable_storage_versioning  = true
enable_uniform_bucket_access = true

# Cloud Function Configuration
cloud_function_memory  = 256  # MB
cloud_function_timeout = 60   # seconds

# Automation Configuration
metadata_sync_schedule = "0 */6 * * *"  # Every 6 hours

# Security Configuration
deletion_protection = false  # Set to true for production

# Network Configuration (Customize for your security requirements)
authorized_networks = [
  {
    name  = "all-networks"
    value = "0.0.0.0/0"  # ⚠️  SECURITY: Restrict this in production
  }
  # Add specific networks for production:
  # {
  #   name  = "office-network"
  #   value = "203.0.113.0/24"
  # },
  # {
  #   name  = "vpn-network"
  #   value = "10.0.0.0/8"
  # }
]

# Database Performance Tuning
database_flags = {
  max_connections                = "200"
  shared_preload_libraries      = "pg_stat_statements"
  log_statement                 = "all"
  log_min_duration_statement    = "1000"  # Log queries > 1 second
  effective_cache_size          = "6GB"   # Adjust based on instance memory
  work_mem                      = "16MB"
}

# Dataplex Configuration
enable_dataplex_discovery = true
dataplex_zone_type       = "RAW"

# Testing and Samples
create_sample_data = true

# Resource Labeling
labels = {
  cost-center   = "analytics"
  team          = "data-engineering"
  env           = "development"
  project-owner = "your-email@company.com"
}

# Advanced Configuration
enable_apis                    = true
function_source_bucket_name    = ""  # Leave empty for auto-generated name