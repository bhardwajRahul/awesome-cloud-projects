{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",
  "contentVersion": "1.0.0.0",
  "metadata": {
    "description": "Parameters for Azure Confidential Computing with Secure Enclaves deployment",
    "author": "Azure Confidential Computing Recipe",
    "dateCreated": "2025-01-12",
    "requirements": [
      "Azure subscription with Confidential Computing quota",
      "User Object ID for HSM administrator",
      "SSH public key for VM access",
      "Supported region (East US, West Europe, etc.)"
    ]
  },
  "parameters": {
    "resourcePrefix": {
      "value": "myconf",
      "metadata": {
        "description": "Prefix for resource names (3-11 characters, will be combined with unique suffix)"
      }
    },
    "location": {
      "value": "East US",
      "metadata": {
        "description": "Azure region for deployment. Must support Confidential Computing VMs (DCasv5/ECasv5 series)"
      }
    },
    "environment": {
      "value": "demo",
      "metadata": {
        "description": "Environment designation for resource tagging and lifecycle management"
      }
    },
    "adminUsername": {
      "value": "azureuser",
      "metadata": {
        "description": "Administrator username for the Confidential VM"
      }
    },
    "sshPublicKey": {
      "value": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC... [REPLACE_WITH_YOUR_SSH_PUBLIC_KEY]",
      "metadata": {
        "description": "SSH public key for VM authentication. Generate with: ssh-keygen -t rsa -b 4096"
      }
    },
    "vmSize": {
      "value": "Standard_DC4as_v5",
      "metadata": {
        "description": "Size of the Confidential VM. Must be a DCasv5 or ECasv5 series VM with AMD SEV-SNP support"
      }
    },
    "hsmAdministratorObjectId": {
      "value": "[REPLACE_WITH_YOUR_USER_OBJECT_ID]",
      "metadata": {
        "description": "Object ID of the user who will be HSM administrator. Get with: az ad signed-in-user show --query id -o tsv"
      }
    },
    "enableCustomerManagedKeys": {
      "value": true,
      "metadata": {
        "description": "Enable customer-managed keys for storage encryption using Key Vault"
      }
    },
    "hsmRetentionDays": {
      "value": 7,
      "metadata": {
        "description": "Retention period for HSM soft delete (7-90 days). Minimum for production: 90 days"
      }
    }
  }
}