# ===================================================================================
# Terraform Variables Example File
# Description: Example configuration file for intelligent database migration orchestration
# Instructions: Copy this file to terraform.tfvars and modify values as needed
# Version: 1.0
# ===================================================================================

# ===================================================================================
# REQUIRED VARIABLES
# ===================================================================================

# Azure resource group name where all resources will be deployed
resource_group_name = "rg-db-migration-orchestration"

# ===================================================================================
# CORE INFRASTRUCTURE CONFIGURATION
# ===================================================================================

# Azure region for all resources
location = "East US"

# Environment designation
environment = "dev"

# Project name for resource naming
project_name = "db-migration"

# Resource tags for governance and cost management
tags = {
  purpose     = "database-migration"
  recipe      = "intelligent-migration-orchestration"
  costCenter  = "IT"
  project     = "database-modernization"
  owner       = "migration-team"
  managedBy   = "terraform"
  environment = "dev"
}

# ===================================================================================
# AZURE DATA FACTORY CONFIGURATION
# ===================================================================================

# Data Factory name (leave empty for auto-generation)
data_factory_name = ""

# Enable managed virtual network for enhanced security
enable_managed_vnet = true

# Git integration settings
enable_git_integration = false
git_configuration = {
  type                = "FactoryGitHubConfiguration"
  account_name        = ""
  repository_name     = ""
  collaboration_branch = "main"
  root_folder         = "/"
}

# ===================================================================================
# DATABASE MIGRATION SERVICE CONFIGURATION
# ===================================================================================

# Database Migration Service name (leave empty for auto-generation)
dms_name = ""

# DMS SKU selection based on workload requirements
dms_sku = "Standard_4vCores"

# Subnet ID for DMS (optional, for network isolation)
dms_subnet_id = ""

# ===================================================================================
# STORAGE ACCOUNT CONFIGURATION
# ===================================================================================

# Storage account name (leave empty for auto-generation)
storage_account_name = ""

# Storage performance and replication settings
storage_account_tier     = "Standard"
storage_replication_type = "LRS"
storage_access_tier      = "Hot"

# Storage containers for organized data management
storage_container_names = [
  "airflow-dags",
  "migration-artifacts", 
  "migration-logs",
  "configuration"
]

# Data retention and versioning settings
storage_container_delete_retention_days = 7
enable_storage_versioning              = false
enable_storage_change_feed             = false

# ===================================================================================
# LOG ANALYTICS AND MONITORING CONFIGURATION
# ===================================================================================

# Log Analytics workspace name (leave empty for auto-generation)
log_analytics_workspace_name = ""

# Log Analytics settings
log_analytics_sku            = "PerGB2018"
log_analytics_retention_days = 30
log_analytics_daily_quota_gb = -1

# Monitoring and alerting settings
enable_monitoring          = true
alert_notification_email   = "admin@company.com"
action_group_name         = ""

# Custom alert rules configuration
alert_rules = [
  {
    name                = "migration-failure-alert"
    description         = "Alert when database migration errors occur"
    severity            = 1
    metric_namespace    = "Microsoft.DataMigration/services"
    metric_name         = "MigrationErrors"
    aggregation         = "Count"
    operator            = "GreaterThan"
    threshold           = 0
    window_size         = "PT5M"
    evaluation_frequency = "PT1M"
  },
  {
    name                = "long-migration-alert"
    description         = "Alert when migration duration exceeds 1 hour"
    severity            = 2
    metric_namespace    = "Microsoft.DataMigration/services"
    metric_name         = "MigrationDuration"
    aggregation         = "Average"
    operator            = "GreaterThan"
    threshold           = 3600
    window_size         = "PT15M"
    evaluation_frequency = "PT5M"
  },
  {
    name                = "high-cpu-alert"
    description         = "Alert when DMS CPU usage is high"
    severity            = 2
    metric_namespace    = "Microsoft.DataMigration/services"
    metric_name         = "CpuPercent"
    aggregation         = "Average"
    operator            = "GreaterThan"
    threshold           = 80
    window_size         = "PT10M"
    evaluation_frequency = "PT5M"
  }
]

# ===================================================================================
# NETWORKING AND SECURITY CONFIGURATION
# ===================================================================================

# Private endpoint configuration for enhanced security
enable_private_endpoints = false

# Virtual network configuration (required if private endpoints enabled)
virtual_network_id        = ""
private_endpoint_subnet_id = ""

# ===================================================================================
# ADVANCED FEATURES CONFIGURATION
# ===================================================================================

# Diagnostic and monitoring features
enable_diagnostic_settings = true
enable_rbac_assignments    = true

# ===================================================================================
# EXAMPLE CONFIGURATIONS FOR DIFFERENT ENVIRONMENTS
# ===================================================================================

# Development Environment Example
# environment = "dev"
# dms_sku = "Standard_1vCore"
# log_analytics_retention_days = 30
# enable_private_endpoints = false

# Test Environment Example  
# environment = "test"
# dms_sku = "Standard_2vCores"
# log_analytics_retention_days = 60
# enable_private_endpoints = false

# Production Environment Example
# environment = "prod"
# dms_sku = "Standard_4vCores"
# log_analytics_retention_days = 90
# enable_private_endpoints = true
# storage_replication_type = "GRS"